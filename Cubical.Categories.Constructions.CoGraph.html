<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Categories.Constructions.CoGraph</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- The graph of a profunctor</a>
<a id="30" class="Symbol">{-#</a> <a id="34" class="Keyword">OPTIONS</a> <a id="42" class="Pragma">-W</a> <a id="45" class="Pragma">noUnsupportedIndexedMatch</a> <a id="71" class="Symbol">#-}</a>
<a id="75" class="Keyword">module</a> <a id="82" href="Cubical.Categories.Constructions.CoGraph.html" class="Module">Cubical.Categories.Constructions.CoGraph</a> <a id="123" class="Keyword">where</a>

<a id="130" class="Comment">-- open import Cubical.Categories.Category</a>
<a id="173" class="Comment">-- open import Cubical.Categories.Functor</a>
<a id="215" class="Comment">-- open import Cubical.Categories.Constructions.BinProduct</a>
<a id="274" class="Comment">-- open import Cubical.Foundations.Prelude hiding (Square)</a>
<a id="333" class="Comment">-- open import Cubical.Foundations.Structure</a>
<a id="378" class="Comment">-- open import Cubical.Foundations.Function</a>
<a id="422" class="Comment">-- open import Cubical.Foundations.HLevels</a>
<a id="465" class="Comment">-- open import Cubical.Data.Empty as Empty</a>
<a id="508" class="Comment">-- open import Cubical.Data.Sigma</a>
<a id="542" class="Comment">-- open import Cubical.Data.Sum</a>
<a id="574" class="Comment">-- open import Cubical.Categories.Profunctor.General</a>
<a id="627" class="Comment">-- open import Cubical.Categories.Functors.HomFunctor</a>
<a id="681" class="Comment">-- open import Cubical.Categories.Profunctor.Morphism</a>

<a id="736" class="Comment">-- private</a>
<a id="747" class="Comment">--   variable</a>
<a id="761" class="Comment">--     ℓC ℓC&#39; ℓD ℓD&#39; ℓS : Level</a>

<a id="794" class="Comment">-- open Category</a>
<a id="811" class="Comment">-- open Functor</a>

<a id="828" class="Comment">-- module _ {C : Category ℓC ℓC&#39;}</a>
          <a id="872" class="Comment">-- {D : Category ℓD ℓD&#39;}</a>
  <a id="899" class="Comment">-- (P : C o-[ ℓS ]-* D) where</a>
<a id="929" class="Comment">--   CoGraphOb : Type (ℓ-max ℓC ℓD)</a>
<a id="965" class="Comment">--   CoGraphOb = C .ob ⊎ D .ob</a>

<a id="997" class="Comment">--   data CoGraphHom : CoGraphOb → CoGraphOb →</a>
<a id="1044" class="Comment">--                   Type (ℓ-max ℓS (ℓ-max (ℓ-max ℓC ℓC&#39;) (ℓ-max ℓD ℓD&#39;))) where</a>
<a id="1125" class="Comment">--     ↑o : ∀ {A B} → C [ A , B ] → CoGraphHom (inl A) (inl B)</a>
<a id="1188" class="Comment">--     ↑* : ∀ {A B} → D [ A , B ] → CoGraphHom (inr A) (inr B)</a>
<a id="1251" class="Comment">--     ↑p : ∀ {A B} → ⟨ P ⟅ A , B ⟆ ⟩ → CoGraphHom (inl A) (inr B)</a>

<a id="1319" class="Comment">--   CoGraphComp : ∀ {A B C} → CoGraphHom A B → CoGraphHom B C → CoGraphHom A C</a>
<a id="1399" class="Comment">--   CoGraphComp (↑o f) (↑o f&#39;) = ↑o (f ⋆⟨ C ⟩ f&#39;)</a>
<a id="1450" class="Comment">--   CoGraphComp (↑* g) (↑* g&#39;) = ↑* (g ⋆⟨ D ⟩ g&#39;)</a>
<a id="1501" class="Comment">--   CoGraphComp (↑o f) (↑p p) = ↑p (P .F-hom (f , (D .id)) p)</a>
<a id="1564" class="Comment">--   CoGraphComp (↑p p) (↑* g) = ↑p (P .F-hom ((C .id) , g) p)</a>

<a id="1628" class="Comment">--   ↑p-r : ∀ {A B} → CoGraphHom (inl A) (inr B) → ⟨ P ⟅ A , B ⟆ ⟩</a>
<a id="1695" class="Comment">--   ↑p-r (↑p p) = p</a>

<a id="1717" class="Comment">--   private</a>
<a id="1730" class="Comment">--     ↑o-r : ∀ {A B} → CoGraphHom (inl A) (inl B) → C [ A , B ]</a>
<a id="1795" class="Comment">--     ↑o-r (↑o f) = f</a>

<a id="1819" class="Comment">--     ↑o-r-retract : ∀ {A B} → (f : CoGraphHom (inl A) (inl B)) →</a>
  <a id="1888" class="Comment">--     ↑o (↑o-r f) ≡ f</a>
<a id="1911" class="Comment">--     ↑o-r-retract (↑o f) = refl</a>

<a id="1946" class="Comment">--     ↑*-r : ∀ {A B} → CoGraphHom (inr A) (inr B) → D [ A , B ]</a>
<a id="2011" class="Comment">--     ↑*-r (↑* g) = g</a>

<a id="2035" class="Comment">--     ↑*-r-retract : ∀ {A B} → (f : CoGraphHom (inr A) (inr B)) →</a>
<a id="2102" class="Comment">--     ↑* (↑*-r f) ≡ f</a>
<a id="2125" class="Comment">--     ↑*-r-retract (↑* f) = refl</a>

<a id="2160" class="Comment">--     ↑p-r-retract : ∀ {A B} → (f : CoGraphHom (inl A) (inr B)) →</a>
                      <a id="2249" class="Comment">--     ↑p (↑p-r f) ≡ f</a>
<a id="2272" class="Comment">--     ↑p-r-retract (↑p f) = refl</a>

<a id="2307" class="Comment">--     absurd-r : ∀ {A B} → CoGraphHom (inr A) (inl B) → ⊥</a>
<a id="2366" class="Comment">--     absurd-r ()</a>

<a id="2386" class="Comment">--   CoGraph : Category (ℓ-max ℓC ℓD)</a>
<a id="2424" class="Comment">--                      (ℓ-max (ℓ-max (ℓ-max (ℓ-max ℓC ℓC&#39;) ℓD) ℓD&#39;) ℓS)</a>
<a id="2497" class="Comment">--   CoGraph .ob = CoGraphOb</a>
<a id="2526" class="Comment">--   CoGraph .Hom[_,_] = CoGraphHom</a>
<a id="2562" class="Comment">--   CoGraph .id {inl A} = ↑o (C .id)</a>
<a id="2600" class="Comment">--   CoGraph .id {inr B} = ↑* (D .id)</a>
<a id="2638" class="Comment">--   CoGraph ._⋆_ = CoGraphComp</a>
<a id="2670" class="Comment">--   CoGraph .⋆IdL (↑o f) = cong ↑o (C .⋆IdL f)</a>
<a id="2718" class="Comment">--   CoGraph .⋆IdL (↑p p) = cong ↑p (λ i → (P .F-id i) p)</a>
<a id="2776" class="Comment">--   CoGraph .⋆IdL (↑* g) = cong ↑* (D .⋆IdL g)</a>
<a id="2824" class="Comment">--   CoGraph .⋆IdR (↑o f) = cong ↑o (C .⋆IdR f)</a>
<a id="2872" class="Comment">--   CoGraph .⋆IdR (↑p p) = cong ↑p (λ i → (P .F-id i) p)</a>
<a id="2930" class="Comment">--   CoGraph .⋆IdR (↑* g) = cong ↑* (D .⋆IdR g)</a>
<a id="2978" class="Comment">--   CoGraph .⋆Assoc (↑o f) (↑o f&#39;) (↑o f&#39;&#39;) = cong ↑o (C .⋆Assoc _ _ _)</a>
<a id="3051" class="Comment">--   CoGraph .⋆Assoc (↑o f) (↑o f&#39;) (↑p p) =</a>
<a id="3096" class="Comment">--     cong ↑p ((λ i → P .F-hom (f ⋆⟨ C ⟩ f&#39; , D .⋆IdL (D .id) (~ i)) p)</a>
<a id="3169" class="Comment">--       ∙ λ i → (P .F-seq (f&#39; , D .id) (f , D .id) i) p)</a>
<a id="3227" class="Comment">--   CoGraph .⋆Assoc (↑o f) (↑p p) (↑* g) =</a>
<a id="3271" class="Comment">--     cong ↑p ((λ i → (P .F-seq (f , D .id) (C .id , g) (~ i)) p)</a>
<a id="3338" class="Comment">--       ∙ (λ i → P .F-hom ((C .⋆IdL f ∙ sym (C .⋆IdR f)) i ,</a>
<a id="3400" class="Comment">--                          (D .⋆IdL g ∙ sym (D .⋆IdR g)) i) p)</a>
<a id="3464" class="Comment">--       ∙ λ i → (P .F-seq ((C .id) , g) (f , (D .id)) i ) p)</a>
<a id="3526" class="Comment">--   CoGraph .⋆Assoc (↑p p) (↑* h) (↑* h&#39;) =</a>
<a id="3571" class="Comment">--     cong ↑p ((λ i → (P .F-seq (C .id , h) (C .id , h&#39;) (~ i)) p)</a>
<a id="3639" class="Comment">--       ∙ λ i → P .F-hom ( C .⋆IdL (C .id) i , h ⋆⟨ D ⟩ h&#39; ) p)</a>
<a id="3704" class="Comment">--   CoGraph .⋆Assoc (↑* h) (↑* h&#39;) (↑* h&#39;&#39;) = cong ↑* (D .⋆Assoc _ _ _)</a>
<a id="3777" class="Comment">--   CoGraph .isSetHom {inl A} {inl A&#39;} =</a>
<a id="3819" class="Comment">--     isSetRetract ↑o-r ↑o ↑o-r-retract (C .isSetHom)</a>
<a id="3874" class="Comment">--   CoGraph .isSetHom {inl A} {inr B} =</a>
<a id="3915" class="Comment">--     isSetRetract ↑p-r ↑p ↑p-r-retract ((P ⟅ _ ⟆ ) .snd)</a>
<a id="3974" class="Comment">--   CoGraph .isSetHom {inr B} {inr B&#39;} =</a>
<a id="4016" class="Comment">--     isSetRetract ↑*-r ↑* ↑*-r-retract (D .isSetHom)</a>
<a id="4071" class="Comment">--   CoGraph .isSetHom {inr B} {inl A} = λ f → Empty.rec (absurd-r f)</a>

<a id="4142" class="Comment">--   ↑oF : Functor C CoGraph</a>
<a id="4171" class="Comment">--   ↑oF .F-ob = inl</a>
<a id="4192" class="Comment">--   ↑oF .F-hom = ↑o</a>
<a id="4213" class="Comment">--   ↑oF .F-id = refl</a>
<a id="4235" class="Comment">--   ↑oF .F-seq f g = refl</a>

<a id="4263" class="Comment">--   ↑*F : Functor D CoGraph</a>
<a id="4292" class="Comment">--   ↑*F .F-ob = inr</a>
<a id="4313" class="Comment">--   ↑*F .F-hom = ↑*</a>
<a id="4334" class="Comment">--   ↑*F .F-id = refl</a>
<a id="4356" class="Comment">--   ↑*F .F-seq f g = refl</a>

<a id="4384" class="Comment">--   open ProfHom</a>
<a id="4402" class="Comment">--   ↑pH : ProfHom P ↑oF ↑*F (HomFunctor CoGraph)</a>
<a id="4452" class="Comment">--   ↑pH .R-hom b c = ↑p</a>
<a id="4477" class="Comment">--   ↑pH .R-nat b&#39; b c c&#39; f p g =</a>
<a id="4511" class="Comment">--     cong ↑p ((λ i → (P ⟪ C .⋆IdL f (~ i) , D .⋆IdL g (~ i) ⟫) p) ∙</a>
<a id="4581" class="Comment">--       (λ i → P .F-seq (f , (D .id)) ((C .id) , g) i p))</a>

<a id="4641" class="Comment">--   ↑pH-r : ProfHom (HomFunctor CoGraph ∘F ((↑oF ^opF) ×F ↑*F))</a>
<a id="4706" class="Comment">--                   (Id {C = C}) (Id {C = D}) P</a>
<a id="4755" class="Comment">--   ↑pH-r .R-hom b c = ↑p-r</a>
<a id="4784" class="Comment">--   ↑pH-r .R-nat b&#39; b c c&#39; f (↑p p) g =</a>
<a id="4825" class="Comment">--     (λ i → P .F-seq (f , (D .id)) ((C .id) , g) (~ i) p) ∙</a>
<a id="4887" class="Comment">--       λ i → P .F-hom (C .⋆IdL f i , D .⋆IdL g i) p</a>
</pre></body></html>